<ng-container *ngIf="productListVm$ | async as vm">
  @if (vm.productsRequestStatus == 'loading') {
    @if (vm.products.length) {
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    } @else {
      <ngrx-workshop-spinner></ngrx-workshop-spinner>
    }
  } @else {
    <div
      class="products-container"
      *ngIf="vm.products as products;"
    >
      <a
        class="card-link"
        [routerLink]="['/details', product.id]"
        *ngFor="let product of products"
      >
        <mat-card>
          <mat-card-title>{{ product.title }}</mat-card-title>
          <img class="thumbnail" [src]="product.url"/>

          <ngrx-workshop-stars
            [rating]="product.rating"
            [rated]="(customerRatings$ | async)?.[product.id]"
          ></ngrx-workshop-stars>
        </mat-card>
      </a>
    </div>
  }
</ng-container>
